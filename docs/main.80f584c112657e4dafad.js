(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{134:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(21),c=a(159),o=a(155),l=a(15),s=(Math.sqrt(5),.25),u=s/3.5,m=6e4/3600*u,f=a(16),d=a(39),h=a.n(d);function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(a,!0).forEach(function(t){x(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var k,E=Math.min,g=Math.max,v=Object(f.a)(function(e){return g(E(6e4/3600,6.666666666666666*(.25/e-1)),0)}),b=Object(f.a)(function(e){return g(E(6e4/3600*e,6.666666666666666*(.25-e)),0)}),w={play:!1,time:0,k:.07142857142857142};!function(e){e.TICK="TICK",e.SET_K="SET_K",e.SET_TIME="SET_TIME",e.SET_PLAY="SET_PLAY"}(k||(k={}));var O=Object(f.a)(function(e){return h()(25*-b(e),140*e).map(function(t){return{x0:t/e,t0:0,x1:t/e+25*v(e),t1:25}})}),j=Object(f.a)(function(e,t){var a=t*v(e);return O(e).map(function(e){return e.x0+a})}),S=Object(f.a)(function(e){var t=v(e);return O(e).map(function(e){return e.x0+3.75*t}).filter(function(e){return e>=21&&e<=119}).sort(function(e,t){return t-e})}),M=Object(f.a)(function(e){var t=v(e);return O(e).map(function(e){return(21-e.x0)/t}).filter(function(e){return e>=3.75&&e<=22.5}).sort(function(e,t){return e-t})}),A=h()(0,.2525,.0025).map(function(e){return[e,b(e)]}),T=function(e,t){switch(t.type){case k.SET_TIME:return y({},e,{time:t.payload});case k.TICK:return y({},e,{time:(e.time+t.payload)%25});case k.SET_K:return y({},e,{k:t.payload});case k.SET_PLAY:return y({},e,{play:t.payload});default:return e}},N=n.a.createContext({state:w,dispatch:null}),L=a(36),C=a(158),P=a(156),W=a(27),I=a(150),_=a(151),z=a(152),q=a(37),K=a(153),D=a(23),Y=a.n(D),R=(a(45),{fontSize:"12px"}),B=n.a.memo(function(e){var t=e.dx,a=void 0===t?0:t,r=e.dy,i=void 0===r?0:r,c=e.latexstring,o=void 0===c?"":c;return n.a.createElement("foreignObject",{width:"90",height:"75",transform:"translate(".concat(a,", ").concat(i,")")},n.a.createElement("span",{style:R},n.a.createElement(Y.a,{math:o})))});function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],r=!0,n=!1,i=void 0;try{for(var c,o=e[Symbol.iterator]();!(r=(c=o.next()).done)&&(a.push(c.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var H=function(e){return e?{width:e.offsetWidth,height:e.offsetHeight}:{width:0,height:0}};function J(e){var t=F(Object(r.useState)(H(e?e.current:null)),2),a=t[0],n=t[1],i=Object(r.useCallback)(function(){return e.current&&n(H(e.current))},[e]);return Object(r.useLayoutEffect)(function(){if(e.current)return i(),window.addEventListener("resize",i),function(){return window.removeEventListener("resize",i)}},[e.current]),a}var U=n.a.memo(function(){return n.a.createElement("defs",null,n.a.createElement("marker",{id:"arrow",viewBox:"0 0 15 15",refY:"5",refX:"2",markerWidth:"8",markerHeight:"8",orient:"auto-start-reverse",fill:"black"},n.a.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z"})))}),X=(a(133),a(3)),G=a(28);function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],r=!0,n=!1,i=void 0;try{for(var c,o=e[Symbol.iterator]();!(r=(c=o.next()).done)&&(a.push(c.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var V=25,Z=25,$=20,ee=10,te="translate(".concat($,",").concat(V,")"),ae=Object(f.a)(function(e,t){return{tScale:Object(W.a)().range([0,e]).domain([0,25]),xScale:Object(W.a)().range([t,0]).domain([0,140])}}),re=n.a.memo(function(e){var t=e.xScale,a=e.tScale,r=e.k,i=e.lineClass;return n.a.createElement("g",{id:"g-lines"},O(r).map(function(e,r){var c=e.x1,o=e.x0,l=e.t1,s=e.t0;return n.a.createElement("path",{key:r,d:"M".concat(a(s),",").concat(t(o),"L").concat(a(l),",").concat(t(c)),className:i})}))}),ne=n.a.memo(function(e){e.time;var t=e.xScale,a=e.tScale,i=e.t,c=e.x,o=e.className,l=(e.play,Object(r.useRef)());return Object(r.useLayoutEffect)(function(){Object(X.c)(l.current).attr("r",0).transition().ease(G.b).duration(320).attr("r",7).attr("stroke-width",4).transition().duration(300).ease(G.b).attr("stroke-width",2).attr("r",4.5)},[]),n.a.createElement("circle",{ref:l,className:o,cx:a(i),cy:t(c)})}),ie={},ce=function(){var e=Object(r.useContext)(N).state,t=Object(r.useRef)(),a=function(e){var t=e.width,a=e.height;return{width:Math.max(t-$-ee,0),height:Math.max(a-V-Z,0)}}(J(t)),i=a.width,c=a.height,o=oe(ie),l=ae(i,c),s=l.tScale,u=l.xScale,m=Q(Object(r.useMemo)(function(){return[c-u(3),c-u(1.5)]},[u]),2),f=m[0],d=m[1];return n.a.createElement("div",{ref:t,className:o.container},n.a.createElement("svg",{className:o.svg},n.a.createElement(U,null),n.a.createElement("g",{transform:te},n.a.createElement("mask",{id:"myMask2"},n.a.createElement("rect",{width:i,height:c,fill:"white"})),n.a.createElement("mask",{id:"myMask3"},n.a.createElement("rect",{width:s(e.time),height:c,fill:"white"})),n.a.createElement("g",{id:"g-masked",mask:"url(#myMask2)"},Object(r.createElement)("path",{className:o.road,strokeWidth:c-u(5),d:"M0,0L0,".concat(c),transform:"translate(".concat(s(e.time),",0)")}),n.a.createElement("g",{className:o.maskedLines,mask:"url(#myMask3)"},Object(r.createElement)(re,{xScale:u,tScale:s,k:e.k,lineClass:o.line})),n.a.createElement("g",{id:"g-cut"},n.a.createElement("rect",{className:o.cut,width:s(18.75),height:c-u(98),y:u(119),x:s(3.75)}),e.time>=3.75&&S(e.k).map(function(t,a){return n.a.createElement(ne,{key:a,x:t,t:3.75,tScale:s,xScale:u,time:e.time,play:e.play,className:o.kdot})}),M(e.k).filter(function(t){return t<=e.time}).map(function(t,a){return n.a.createElement(ne,{key:a,x:21,t:t,tScale:s,xScale:u,time:e.time,play:e.play,className:o.qdot})})),n.a.createElement("g",{id:"g-lane",transform:"translate(".concat(s(e.time),",0)")},n.a.createElement("g",{id:"g-cars"},j(e.k,e.time).map(function(e,t){return n.a.createElement("rect",{key:t,className:o.car,y:u(e)+f/6,x:-d/2,height:f,width:d})})))),n.a.createElement("g",{id:"vaxis"},n.a.createElement("path",{d:"M0,0L0,".concat(c),fill:"none",stroke:"black",className:o.axis,markerStart:"url(#arrow)"}),n.a.createElement(B,{dx:-10,dy:-25,latexstring:"x \\; \\text{(m)}"})),n.a.createElement("g",{transform:"translate(0,".concat(c,")"),id:"taxis"},n.a.createElement("path",{d:"M0,0L".concat(i,",0"),fill:"none",stroke:"black",markerEnd:"url(#arrow)",className:o.axis}),n.a.createElement(B,{dx:i-15,dy:5,latexstring:"t \\; \\text{(s)}"})))))},oe=Object(C.a)({path:{strokeWidth:"4px",fill:"none",stroke:I.a.A700,opacity:.8},container:{position:"relative",width:"100%",height:"100%"},line:{strokeWidth:"1.5px",stroke:I.a.A400,strokeDasharray:"1,1"},svg:{width:"100%",height:"100%","& text":{fontFamily:"Puritan, san-serif",fontSize:"11px"}},cut:{stroke:L.a[700],strokeWidth:"2px",rx:2,ry:2,fill:_.a.A400,fillOpacity:.15},car:{fill:z.a.A200},masked:{mask:"url(#myMask2)"},maskedLines:{mask:"url(#myMask3)"},road:{stroke:L.a[300]},axis:{strokeWidth:"2px",color:L.a[800]},qdot:{fill:q.a.A400,stroke:"white",strokeWidth:"2px"},kdot:{fill:K.a.A700,stroke:"white",strokeWidth:"2px"},text:{textAlign:"center",fontSize:"10px"}}),le=a(154),se=function(e,t,a){return Object(r.useMemo)(function(){return Object(W.a)().domain(t).range(e)},a)};function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],r=!0,n=!1,i=void 0;try{for(var c,o=e[Symbol.iterator]();!(r=(c=o.next()).done)&&(a.push(c.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var me=20,fe=20,de=20,he=10,pe="translate(".concat(de,",").concat(me,")"),ye={},xe=function(){var e=Object(r.useContext)(N).state,t=Object(r.useRef)(),a=function(e){var t=e.width,a=e.height;return{width:Math.max(t-de-he,0),height:Math.max(a-me-fe,0)}}(J(t)),i=a.width,c=a.height,o=ke(ye),l=se([0,i],[0,.275],[i]),s=se([c,0],[0,1.2*m],[c]),f=Object(r.useMemo)(function(){var e="M"+A.map(function(e){var t=ue(e,2),a=t[0],r=t[1];return[l(a),s(r)]}).join("L");return n.a.createElement("path",{className:o.path,d:e})},[i,c]);return n.a.createElement("div",{ref:t,className:o.container},n.a.createElement("svg",{className:o.svg},n.a.createElement(U,null),n.a.createElement("g",{transform:pe},n.a.createElement("mask",{id:"myMask4"},n.a.createElement("rect",{width:i,height:c,fill:"white"})),n.a.createElement("g",{mask:"url(#myMask4)"},f,n.a.createElement("circle",{cx:l(e.k),cy:s(b(e.k)),className:o.dot,r:6})),n.a.createElement("g",{id:"g-qaxis"},n.a.createElement("path",{d:"M0,0L0,".concat(c),fill:"none",stroke:"black",className:o.axis,markerStart:"url(#arrow)"}),n.a.createElement(B,{dy:s(m)-12,dx:-15,latexstring:"q_0"}),n.a.createElement(B,{dx:-10,dy:-25,latexstring:"q \\; \\text{veh/s}"})),n.a.createElement("g",{transform:"translate(0,".concat(c,")"),id:"g-kaxis"},n.a.createElement("path",{d:"M0,0L".concat(i,",0"),fill:"none",stroke:"black",markerEnd:"url(#arrow)",className:o.axis}),n.a.createElement(B,{dx:l(u),dy:0,latexstring:"k_0"}),n.a.createElement(B,{dx:i-70,dy:5,latexstring:"k \\; \\text{(veh/100 m)}"})))))},ke=Object(C.a)({dot:{fill:q.a[500],stroke:"white",strokeWidth:"2px"},path:{strokeWidth:"4px",fill:"none",stroke:I.a.A700,opacity:.8},container:{position:"relative",width:"100%",height:"100%"},line:{strokeWidth:"1.5px",stroke:I.a.A400,strokeDasharray:"2,2"},svg:{width:"100%",height:"100%","& text":{fontFamily:"Puritan, san-serif",fontSize:"11px"}},cut:{stroke:L.a[700],strokeWidth:"2px",fill:K.a.A200,fillOpacity:.2},car:{fill:z.a.A400},masked:{mask:"url(#myMask2)"},maskedLines:{mask:"url(#myMask3)"},road:{stroke:L.a[300]},axis:{strokeWidth:"2px",color:L.a[800]},qdot:{fill:q.a.A400,stroke:"white",strokeWidth:"2px"},kdot:{fill:le.a.A700,stroke:"white",strokeWidth:"2px"},text:{textAlign:"center",fontSize:"10px"}}),Ee=a(11),ge=a(160);function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],r=!0,n=!1,i=void 0;try{for(var c,o=e[Symbol.iterator]();!(r=(c=o.next()).done)&&(a.push(c.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var be=Object(Ee.a)(function(e){return{root:{color:e.palette.primary.main,marginBottom:"5px"}}})(ge.a),we=function(){var e=Object(r.useContext)(N),t=e.state,a=e.dispatch,i=t.play,u=Se(Oe);return function(e,t){var a=Object(r.useRef)(0);a.current=e,Object(r.useLayoutEffect)(function(){if(t){var e=0,r=Object(l.c)(function(t){var r=(t-e)/1e3;e=t,a.current&&a.current(r)});return function(){return r.stop()}}},[t])}(function(e){e/=.25,a({type:k.TICK,payload:e})},i),n.a.createElement(o.a,{elevation:2,className:u.paper},n.a.createElement(c.a,{component:"div",className:u.button,variant:"contained",color:"secondary",onClick:function(){return a({type:k.SET_PLAY,payload:!i})}},i?"PAUSE":"PLAY"),n.a.createElement("div",{className:u.sliderLabel,style:{marginTop:15}},"density ",n.a.createElement(Y.a,{math:"k \\; \\text{(veh/km)}"})),n.a.createElement(be,{component:"div",onChange:function(e,t){return a({type:k.SET_K,payload:t})},value:t.k,step:s/300,min:0,max:s}),n.a.createElement("div",{className:u.sliderLabel},"time ",n.a.createElement(Y.a,{math:"t \\; (s)"})),n.a.createElement(be,{component:"div",onChange:function(e,t){return a({type:k.SET_TIME,payload:t})},value:t.time,step:25/300,min:0,max:25}))},Oe={},je=function(){var e=Se(Oe);return n.a.createElement(P.a,{direction:"column",container:!0,className:e.main,alignItems:"stretch",spacing:3},n.a.createElement(P.a,{item:!0,className:e.spaceTimeContainer},n.a.createElement(ce,null)),n.a.createElement(P.a,{item:!0,className:e.qkContainer},n.a.createElement(xe,null)),n.a.createElement(P.a,{item:!0},n.a.createElement(we,null)))},Se=Object(C.a)({"@global":{body:{margin:"0 !important",padding:"0 !important",fontFamily:" 'Puritan', sans-serif",color:L.a[800]},".katex":{fontSize:"1em"}},qkContainer:{height:"250px"},spaceTimeContainer:{height:"450px"},main:{maxWidth:"700px",margin:"0 auto"},sliderLabel:{fontSize:"14px",marginTop:"5px"},paper:{display:"flex",justifyContent:"center",flexDirection:"column",padding:"10px 30px"},button:{margin:"5px"},sliderContainer:{width:"300px",padding:"20px",boxSizing:"border-box"}}),Me=a(157),Ae=a(49),Te=a(47),Ne=a.n(Te),Le=a(48),Ce=a.n(Le),Pe=document.getElementById("root");if(!Pe)throw Error("no root container");var We=Object(Ae.a)({palette:{primary:{main:Ne.a[500]},secondary:{main:Ce.a[500]}}});Object(i.render)(n.a.createElement(Me.a,{theme:We},n.a.createElement(function(){var e=ve(Object(r.useReducer)(T,w),2),t=e[0],a=e[1];return n.a.createElement(N.Provider,{value:{state:t,dispatch:a}},n.a.createElement(je,null))},null)),Pe)}},[[134,1,2]]]);