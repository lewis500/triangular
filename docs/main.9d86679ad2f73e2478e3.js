(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{118:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(14),o=a(143),c=a(138),l=a(40),s=(Math.sqrt(5),a(19)),u=a.n(s),m=a(28);function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(a,!0).forEach((function(t){p(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var h,k=Math.min,y=Math.max,x=Object(m.a)([function(e){return e.kj},function(e){return e.k0},function(e){return e.vf}],(function(e,t,a){var r=a*t/(e-t);return function(t){return y(k(a,r*(e/t-1)),0)}})),E=Object(m.a)([x],(function(e){return function(t){return t*e(t)}})),v=function(e){return u()(0,1e3,1/e).map((function(e){return{id:e,x:e}}))},b={play:!1,time:0,vf:4.5,kj:1/3,k0:1/9,k:1/9,cars:v(1/9)};!function(e){e.TICK="TICK",e.SET_K="SET_K",e.SET_PLAY="SET_PLAY",e.SET_VF="SET_VF",e.SET_KJ="SET_KJ",e.SET_K0="SET_K0"}(h||(h={}));var g=function(e,t){switch(t.type){case h.TICK:var a=t.payload*x(e)(e.k);return f({},e,{cars:e.cars.map((function(e){return{id:e.id,x:(e.x+a)%1e3}}))});case h.SET_K0:return f({},e,{k0:t.payload});case h.SET_VF:return f({},e,{vf:t.payload});case h.SET_KJ:return f({},e,{kj:t.payload});case h.SET_K:return f({},e,{k:t.payload,cars:v(t.payload)});case h.SET_PLAY:return f({},e,{play:t.payload});default:return e}},j=n.a.createContext({state:b,dispatch:null}),w=a(26),O=a(142),S=a(6),T=a(139),A=a(25),_=a(134),L=a(135),C=a(136),M=a(137);function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw i}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var P=function(e){return e?{width:e.offsetWidth,height:e.offsetHeight}:{width:0,height:0}};function W(e){var t=N(Object(r.useState)(P(e?e.current:null)),2),a=t[0],n=t[1],i=Object(r.useCallback)((function(){return e.current&&n(P(e.current))}),[e]);return Object(r.useLayoutEffect)((function(){if(e.current)return i(),window.addEventListener("resize",i),function(){return window.removeEventListener("resize",i)}}),[e.current]),a}var K=20,z=("translate(".concat(20,",").concat(K,")"),function(){var e=Object(r.useContext)(j).state,t=Object(r.useRef)(),a=W(t).width,i=q({width:a}),o=a/2-10;return n.a.createElement("div",{ref:t,className:i.container},n.a.createElement("svg",{className:i.svg},n.a.createElement("g",{transform:"translate(".concat(a/2,",").concat(a/2,")")},n.a.createElement("circle",{className:i.road,r:o}),n.a.createElement("g",null,e.cars.map((function(e){return n.a.createElement("rect",{key:e.id,transform:"rotate(".concat(e.x/1e3*360,") translate(0,").concat(-o-1.5,")"),className:i.car,rx:"1",ry:"1",width:"3.5",height:"2"})}))))))}),q=Object(O.a)({dot:{fill:A.a[500],stroke:"white",strokeWidth:"2px"},path:{strokeWidth:"4px",fill:"none",stroke:_.a.A700,opacity:.8},container:{position:"relative",boxSizing:"border-box",width:"100%"},line:{strokeWidth:"1.5px",stroke:_.a.A400,strokeDasharray:"2,2"},svg:{width:"100%",height:function(e){return e.width},"& text":{fontFamily:"Puritan, san-serif",fontSize:"11px"}},cut:{stroke:w.a[700],strokeWidth:"2px",fill:L.a.A200,fillOpacity:.2},car:{fill:C.a.A400},masked:{mask:"url(#myMask2)"},maskedLines:{mask:"url(#myMask3)"},road:{stroke:w.a[300],strokeWidth:20,fill:"none"},axis:{strokeWidth:"2px",color:w.a[800]},qdot:{fill:A.a.A400,stroke:"white",strokeWidth:"2px"},kdot:{fill:M.a.A700,stroke:"white",strokeWidth:"2px"},text:{textAlign:"center",fontSize:"10px"}}),I=a(11),D=a.n(I),F=(a(34),{fontSize:"12px"}),J=n.a.memo((function(e){var t=e.dx,a=void 0===t?0:t,r=e.dy,i=void 0===r?0:r,o=e.latexstring,c=void 0===o?"":o;return n.a.createElement("foreignObject",{width:"90",height:"75",transform:"translate(".concat(a,", ").concat(i,")")},n.a.createElement("span",{style:F},n.a.createElement(D.a,{math:c})))})),Y=n.a.memo((function(){return n.a.createElement("defs",null,n.a.createElement("marker",{id:"arrow",viewBox:"0 0 15 15",refY:"5",refX:"2",markerWidth:"8",markerHeight:"8",orient:"auto-start-reverse",fill:"black"},n.a.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z"})))})),R=a(141),V=function(e,t,a){return Object(r.useMemo)((function(){return Object(R.a)().domain(t).range(e)}),a)},B=20,H=20,U=20,X=10,G="translate(".concat(U,",").concat(B,")"),Q={},Z=function(){var e=Object(r.useContext)(j).state,t=Object(r.useRef)(),a=function(e){var t=e.width,a=e.height;return{width:Math.max(t-U-X,0),height:Math.max(a-B-H,0)}}(W(t)),i=a.width,o=a.height,c=$(Q),l=V([0,i],[0,.5],[i]),s=V([o,0],[0,2/3],[o]),m=E(e),d=Object(r.useMemo)((function(){var t="M"+u()(0,e.kj,e.kj/100).map((function(e){return[l(e),s(m(e))]})).join("L");return n.a.createElement("path",{className:c.path,d:t})}),[i,o,e.kj,e.k0,e.vf]);return n.a.createElement("div",{ref:t,className:c.container},n.a.createElement("svg",{className:c.svg},n.a.createElement(Y,null),n.a.createElement("g",{transform:G},n.a.createElement("mask",{id:"myMask4"},n.a.createElement("rect",{width:i,height:o,fill:"white"})),n.a.createElement("g",{mask:"url(#myMask4)"},d,n.a.createElement("circle",{cx:l(e.k),cy:s(m(e.k)),className:c.dot,r:6})),n.a.createElement("g",{id:"g-qaxis"},n.a.createElement("path",{d:"M0,0L0,".concat(o),fill:"none",stroke:"black",className:c.axis,markerStart:"url(#arrow)"}),n.a.createElement(J,{dy:s(e.qMax)-12,dx:-15,latexstring:"q_0"}),n.a.createElement(J,{dx:-10,dy:-25,latexstring:"q \\; \\text{veh/s}"})),n.a.createElement("g",{transform:"translate(0,".concat(o,")"),id:"g-kaxis"},n.a.createElement("path",{d:"M0,0L".concat(i,",0"),fill:"none",stroke:"black",markerEnd:"url(#arrow)",className:c.axis}),n.a.createElement(J,{dx:l(e.qMax/e.vf),dy:0,latexstring:"k_0"}),n.a.createElement(J,{dx:i-70,dy:5,latexstring:"k \\; \\text{(veh/km)}"})))))},$=Object(O.a)({dot:{fill:A.a[500],stroke:"white",strokeWidth:"2px"},path:{strokeWidth:"4px",fill:"none",stroke:_.a.A700,opacity:.8},container:{position:"relative",width:"100%",height:"100%"},line:{strokeWidth:"1.5px",stroke:_.a.A400,strokeDasharray:"2,2"},svg:{width:"100%",height:"100%","& text":{fontFamily:"Puritan, san-serif",fontSize:"11px"}},cut:{stroke:w.a[700],strokeWidth:"2px",fill:L.a.A200,fillOpacity:.2},car:{fill:C.a.A400},masked:{mask:"url(#myMask2)"},maskedLines:{mask:"url(#myMask3)"},road:{stroke:w.a[300]},axis:{strokeWidth:"2px",color:w.a[800]},qdot:{fill:A.a.A400,stroke:"white",strokeWidth:"2px"},kdot:{fill:M.a.A700,stroke:"white",strokeWidth:"2px"},text:{textAlign:"center",fontSize:"10px"}}),ee=a(144);function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw i}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ae=Object(S.a)((function(e){return{root:{color:e.palette.primary.main,marginBottom:"5px"}}}))(ee.a),re=function(){var e=Object(r.useContext)(j),t=e.state,a=e.dispatch,i=t.play,s=oe(ne);return function(e,t){var a=Object(r.useRef)(0);a.current=e,Object(r.useLayoutEffect)((function(){if(t){var e=0,r=Object(l.a)((function(t){var r=(t-e)/1e3;e=t,a.current&&a.current(r)}));return function(){return r.stop()}}}),[t])}((function(e){e/=.1,a({type:h.TICK,payload:e})}),i),n.a.createElement(c.a,{elevation:2,className:s.paper},n.a.createElement(o.a,{component:"div",className:s.button,variant:"contained",color:"secondary",onClick:function(){return a({type:h.SET_PLAY,payload:!i})}},i?"PAUSE":"PLAY"),n.a.createElement("div",{className:s.sliderLabel,style:{marginTop:15}},"density ",n.a.createElement(D.a,{math:"k \\; \\text{(veh/km)}"})),n.a.createElement(ae,{component:"div",onChange:function(e,t){return a({type:h.SET_K,payload:t})},value:t.k,step:.01,min:0,max:t.kj}),n.a.createElement("div",{className:s.sliderLabel},"speed ",n.a.createElement(D.a,{math:"v_f \\; \\text{(m/s)}"})),n.a.createElement(ae,{component:"div",onChange:function(e,t){return a({type:h.SET_VF,payload:t})},value:t.vf,step:.01,min:2,max:7}),n.a.createElement("div",{className:s.sliderLabel},"critical density ",n.a.createElement(D.a,{math:"k_{0} \\; \\text{(veh/km)}"})),n.a.createElement(ae,{component:"div",onChange:function(e,t){return a({type:h.SET_K0,payload:t})},value:t.k0,step:.003,min:.05,max:t.kj}),n.a.createElement("div",{className:s.sliderLabel},"jam density ",n.a.createElement(D.a,{math:"k_{j} \\; \\text{(veh/km)}"})),n.a.createElement(ae,{component:"div",onChange:function(e,t){return a({type:h.SET_KJ,payload:t})},value:t.kj,step:.003,min:.1,max:.5}))},ne={},ie=function(){var e=oe(ne);return n.a.createElement(T.a,{direction:"column",container:!0,className:e.main,alignItems:"stretch",spacing:3},n.a.createElement(T.a,{item:!0},n.a.createElement("div",{className:e.ringContainer},n.a.createElement(z,null))),n.a.createElement(T.a,{item:!0,className:e.qkContainer},n.a.createElement(Z,null)),n.a.createElement(T.a,{item:!0},n.a.createElement(re,null)))},oe=Object(O.a)({"@global":{body:{margin:"0 !important",padding:"0 !important",fontFamily:" 'Puritan', sans-serif",color:w.a[800]},".katex":{fontSize:"1em"}},qkContainer:{height:"250px"},ringContainer:{width:"400px",margin:"auto"},main:{maxWidth:"700px",margin:"0 auto"},sliderLabel:{fontSize:"14px",marginTop:"5px"},paper:{display:"flex",justifyContent:"center",flexDirection:"column",padding:"10px 30px"},button:{margin:"5px"},sliderContainer:{width:"300px",padding:"20px",boxSizing:"border-box"}}),ce=a(140),le=a(39),se=a(37),ue=a.n(se),me=a(38),de=a.n(me),fe=document.getElementById("root");if(!fe)throw Error("no root container");var pe=Object(le.a)({palette:{primary:{main:ue.a[500]},secondary:{main:de.a[500]}}});Object(i.render)(n.a.createElement(ce.a,{theme:pe},n.a.createElement((function(){var e=te(Object(r.useReducer)(g,b),2),t=e[0],a=e[1];return n.a.createElement(j.Provider,{value:{state:t,dispatch:a}},n.a.createElement(ie,null))}),null)),fe)}},[[118,1,2]]]);